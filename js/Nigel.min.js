(function(a,b,c){function d(){function i(a,b){return b.fusionTable||a.indexOf("/fusiontables/")!=-1?!0:!1}function j(a,d,e){if(a===""||d===c||typeof d!="function")return alert("No URL or callback"),c;e=e||{};var f=new g,h=null;if(e.type=e.type||m(a).type,e.raw=e.raw||!1,e.injectToPage=e.injectToPage||!1,(e.fusionTable=i(a,e))&&(a=a.replace(/(([&|\?]n?)alt=csv(&?))/gi,"$2alt=json$3").replace(/&callback(=[^&]*)?|callback(=[^&]*)?&?/gi,""),e.type="JSON"),e.injectToPage){this.loadCallback=d,a+="&callback=Nigel.loadCallback";var j=b.createElement("script"),l=b.getElementsByTagName("script")[0];j.type="text/javascript",j.src=a,l.parentNode.insertBefore(j,l)}else f.onreadystatechange=function(){f.readyState==4&&f.status==200?e.raw?d(f.responseText):(h=k(f.responseText,e.type,e),d(h)):f.readyState==4&&f.status!=200&&d({error:{text:"Request error",code:f.status}})},f.onerror=function(){f.abort(),d({error:{text:"Request error",code:f.status}})},f.open("GET",a,!1),f.overrideMimeType&&f.overrideMimeType(e.type),f.send(null)}function k(a,b,c){return e[b](a,c)}function l(a,b){typeof b.firstRowHeaders!="boolean"&&(b.firstRowHeaders=!0);var c=RegExp("(?:("+b.delimeter+")|[\\n\\r]|^)"+"(?:([\"'])((?:[^\"']+|(?!\\2).|\\2\\2)*)\\2"+"|([^\"'"+b.delimeter+"\\n\\r]*))","gi"),d=[],e=null,f="",g=[],h=0,i=0,j=null;while(e=c.exec(a))e[1]||(h=0,i++,(i>1&&b.firstRowHeaders||!b.firstRowHeaders)&&(b.firstRowHeaders?d.push({}):d.push([]))),j=e[2],f=j?e[3].replace(RegExp(j+j,"g"),j):e[4],i==1&&b.firstRowHeaders?g.push(f):b.firstRowHeaders?(d[d.length-1][g[h]]=f,h++):d[d.length-1].push(f);return d}function m(a){var b=a.split(".").pop().toLowerCase(),c="";switch(b){case"json":case"js":c="JSON";break;case"xml":c="XML";break;case"csv":c="CSV";break;case"tsv":c="TSV"}return{ext:b,type:c}}var d=function(){var a,b,e,l,d={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:e}},g=function(c){return c&&c!==b&&f("Expected '"+c+"' instead of '"+b+"'"),b=e.charAt(a),a+=1,b},h=function(){var a,d="";b==="-"&&(d="-",g("-"));while(b>="0"&&"9">=b)d+=b,g();if(b==="."){d+=".";while(g()&&b>="0"&&"9">=b)d+=b}if(b==="e"||b==="E"){d+=b,g(),(b==="-"||b==="+")&&(d+=b,g());while(b>="0"&&"9">=b)d+=b,g()}return a=+d,isFinite(a)?a:(f("Bad number"),c)},i=function(){var a,c,h,e="";if(b==='"')while(g()){if(b==='"')return g(),e;if(b==="\\")if(g(),b==="u"){for(h=0,c=0;4>c;c+=1){if(a=parseInt(g(),16),!isFinite(a))break;h=h*16+a}e+=String.fromCharCode(h)}else{if(typeof d[b]!="string")break;e+=d[b]}else e+=b}f("Bad string")},j=function(){while(b&&" ">=b)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},m=function(){var a=[];if(b==="["){if(g("["),j(),b==="]")return g("]"),a;while(b){if(a.push(l()),j(),b==="]")return g("]"),a;g(","),j()}}f("Bad array")},n=function(){var a,c={};if(b==="{"){if(g("{"),j(),b==="}")return g("}"),c;while(b){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=l(),j(),b==="}")return g("}"),c;g(","),j()}}f("Bad object")};return l=function(){switch(j(),b){case"{":return n();case"[":return m();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k()}},function(d,g){var h;return e=d,a=0,b=" ",h=l(),j(),b&&f("Syntax error"),typeof g=="function"?function i(a,b){var d,e,f=a[b];if(f&&typeof f=="object")for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&(e=i(f,d),e!==c?f[d]=e:delete f[d]);return g.call(a,b,f)}({"":h},""):h}}(),e={CSV:function(a,b){return b=b||{},b.delimeter=",",l(a,b)},JSON:function(b){return"JSON"in a?JSON.parse(b):d(b)},TSV:function(a,b){return b=b||{},b.delimeter="	",l(a,b)},XML:function(b){function f(a){var b={attributes:[],children:[],nodeName:"",nodeValue:""},c=0,d=0;if(a.attributes.length!=0)for(c=0,d=a.attributes.length;d>c;c++)b.attributes.push([a.attributes[c].nodeName,a.attributes[c].nodeValue]);for(c=0,d=a.childNodes.length;d>c;c++)a.childNodes[c].nodeType!=3&&b.children.push(f(a.childNodes[c]));return b.nodeName=a.nodeName,a.childNodes.length==1&&a.childNodes[0].nodeType==3&&(b.nodeValue=a.childNodes[0].nodeValue),b}var d=null,e={};return a.DOMParser!==c?d=(new DOMParser).parseFromString(b,"text/xml"):(d=new a.ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b)),e=f(d.documentElement)}},g=a.XMLHttpRequest||ActiveXObject("Msxml2.XMLHTTP")||ActiveXObject("Microsoft.XMLHTTP");return navigator.userAgent.indexOf("MSIE")!==-1?!0:!1,{load:j,loadCallback:function(){},parse:k}}a.Nigel=d()})(this,this.document)